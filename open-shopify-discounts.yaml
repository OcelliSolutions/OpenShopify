openapi: 3.0.1
info:
  title: Discounts
  description: Discounts
  version: '2022-04'
servers:
  - url: 'https://{store_name}.myshopify.com/admin/api/{api_version}'
    variables:
      store_name:
        default: '{{store_name}}'
        description: The sub-domain of the storefront.
      api_version:
        default: '2022-04'
        description: The api version.
  - url: 'https://{store_name}.myshopify.com/admin'
    description: Some endpoints do not use the standard routing. This is an alternate.
    variables:
      store_name:
        default: '{{store_name}}'
        description: The sub-domain of the storefront.
paths:
  '/price_rules/{price_rule_id}/discount_codes.json':
    post:
      tags:
        - DiscountCode
      summary: Creates a discount code
      operationId: CreateDiscountCode
      parameters:
        - name: price_rule_id
          in: path
          required: true
          schema:
            type: integer
            format: int64
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateDiscountCodeRequest'
          application/*+json:
            schema:
              $ref: '#/components/schemas/CreateDiscountCodeRequest'
        required: true
      responses:
        '201':
          description: Created
          headers:
            X-Shopify-Shop-Api-Call-Limit:
              description: How many requests you’ve made for a particular store
              schema:
                type: string
            Retry-After:
              description: Contains the number of seconds to wait until you can make a request again.
              schema:
                type: string
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/DiscountCodeItem'
    get:
      tags:
        - DiscountCode
      summary: Retrieves a list of discount codes
      operationId: ListDiscountCodes
      parameters:
        - name: price_rule_id
          in: path
          required: true
          schema:
            type: integer
            format: int64
      responses:
        '200':
          description: Success
          headers:
            X-Shopify-Shop-Api-Call-Limit:
              description: How many requests you’ve made for a particular store
              schema:
                type: string
            Retry-After:
              description: Contains the number of seconds to wait until you can make a request again.
              schema:
                type: string
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/DiscountCodeList'
  '/price_rules/{price_rule_id}/discount_codes/{discount_code_id}.json':
    put:
      tags:
        - DiscountCode
      summary: Updates an existing discount code
      operationId: UpdateDiscountCode
      parameters:
        - name: discount_code_id
          in: path
          required: true
          schema:
            type: integer
            format: int64
        - name: price_rule_id
          in: path
          required: true
          schema:
            type: integer
            format: int64
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdateDiscountCodeRequest'
          application/*+json:
            schema:
              $ref: '#/components/schemas/UpdateDiscountCodeRequest'
        required: true
      responses:
        '200':
          description: Success
          headers:
            X-Shopify-Shop-Api-Call-Limit:
              description: How many requests you’ve made for a particular store
              schema:
                type: string
            Retry-After:
              description: Contains the number of seconds to wait until you can make a request again.
              schema:
                type: string
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/DiscountCodeItem'
    get:
      tags:
        - DiscountCode
      summary: Retrieves a single discount code
      operationId: GetDiscountCode
      parameters:
        - name: discount_code_id
          in: path
          required: true
          schema:
            type: integer
            format: int64
        - name: price_rule_id
          in: path
          required: true
          schema:
            type: integer
            format: int64
      responses:
        '200':
          description: Success
          headers:
            X-Shopify-Shop-Api-Call-Limit:
              description: How many requests you’ve made for a particular store
              schema:
                type: string
            Retry-After:
              description: Contains the number of seconds to wait until you can make a request again.
              schema:
                type: string
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/DiscountCodeItem'
    delete:
      tags:
        - DiscountCode
      summary: Deletes a discount code
      operationId: DeleteDiscountCode
      parameters:
        - name: discount_code_id
          in: path
          required: true
          schema:
            type: integer
            format: int64
        - name: price_rule_id
          in: path
          required: true
          schema:
            type: integer
            format: int64
      responses:
        '204':
          description: No Content
          headers:
            X-Shopify-Shop-Api-Call-Limit:
              description: How many requests you’ve made for a particular store
              schema:
                type: string
            Retry-After:
              description: Contains the number of seconds to wait until you can make a request again.
              schema:
                type: string
  /discount_codes/lookup.json:
    get:
      tags:
        - DiscountCode
      summary: Retrieves the location of a discount code
      operationId: GetLocationOfDiscountCode
      parameters:
        - name: code
          in: query
          description: Retrieves the location of a discount code by code name.
          schema:
            type: string
      responses:
        '303':
          description: Redirect
          headers:
            X-Shopify-Shop-Api-Call-Limit:
              description: How many requests you’ve made for a particular store
              schema:
                type: string
            Retry-After:
              description: Contains the number of seconds to wait until you can make a request again.
              schema:
                type: string
  /discount_codes/count.json:
    get:
      tags:
        - DiscountCode
      summary: Retrieves a count of discount codes for a shop
      operationId: CountDiscountCodesForShop
      parameters:
        - name: times_used
          in: query
          description: Show discount codes with times used.
          schema:
            type: string
        - name: times_used_max
          in: query
          description: Show discount codes used greater than or equal to this value.
          schema:
            type: string
        - name: times_used_min
          in: query
          description: Show discount codes used less than or equal to this value.
          schema:
            type: string
      responses:
        '200':
          description: Success
          headers:
            X-Shopify-Shop-Api-Call-Limit:
              description: How many requests you’ve made for a particular store
              schema:
                type: string
            Retry-After:
              description: Contains the number of seconds to wait until you can make a request again.
              schema:
                type: string
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CountItem'
  '/price_rules/{price_rule_id}/batch.json':
    post:
      tags:
        - DiscountCode
      summary: Creates a discount code creation job
      operationId: CreateDiscountCodeCreationJob
      parameters:
        - name: price_rule_id
          in: path
          required: true
          schema:
            type: integer
            format: int64
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateDiscountCodeRequest'
          application/*+json:
            schema:
              $ref: '#/components/schemas/CreateDiscountCodeRequest'
        required: true
      responses:
        '201':
          description: Created
          headers:
            X-Shopify-Shop-Api-Call-Limit:
              description: How many requests you’ve made for a particular store
              schema:
                type: string
            Retry-After:
              description: Contains the number of seconds to wait until you can make a request again.
              schema:
                type: string
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/DiscountCodeCreationItem'
  '/price_rules/{price_rule_id}/batch/{batch_id}.json':
    get:
      tags:
        - DiscountCode
      summary: Retrieves a discount code creation job
      operationId: GetDiscountCodeCreationJob
      parameters:
        - name: batch_id
          in: path
          required: true
          schema:
            type: integer
            format: int64
        - name: price_rule_id
          in: path
          required: true
          schema:
            type: integer
            format: int64
      responses:
        '200':
          description: Success
          headers:
            X-Shopify-Shop-Api-Call-Limit:
              description: How many requests you’ve made for a particular store
              schema:
                type: string
            Retry-After:
              description: Contains the number of seconds to wait until you can make a request again.
              schema:
                type: string
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/DiscountCodeCreationItem'
  '/price_rules/{price_rule_id}/batch/{batch_id}/discount_codes.json':
    get:
      tags:
        - DiscountCode
      summary: Retrieves a list of discount codes for a discount code creation job
      operationId: ListDiscountCodesForDiscountCodeCreationJob
      parameters:
        - name: batch_id
          in: path
          required: true
          schema:
            type: integer
            format: int64
        - name: price_rule_id
          in: path
          required: true
          schema:
            type: integer
            format: int64
      responses:
        '200':
          description: Success
          headers:
            X-Shopify-Shop-Api-Call-Limit:
              description: How many requests you’ve made for a particular store
              schema:
                type: string
            Retry-After:
              description: Contains the number of seconds to wait until you can make a request again.
              schema:
                type: string
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/DiscountCodeList'
  /price_rules.json:
    post:
      tags:
        - PriceRule
      summary: Creates a price rule
      operationId: CreatePriceRule
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreatePriceRuleRequest'
          application/*+json:
            schema:
              $ref: '#/components/schemas/CreatePriceRuleRequest'
        required: true
      responses:
        '201':
          description: Created
          headers:
            X-Shopify-Shop-Api-Call-Limit:
              description: How many requests you’ve made for a particular store
              schema:
                type: string
            Retry-After:
              description: Contains the number of seconds to wait until you can make a request again.
              schema:
                type: string
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PriceRuleItem'
    get:
      tags:
        - PriceRule
      summary: Retrieves a list of price rules
      operationId: ListPriceRules
      parameters:
        - name: created_at_max
          in: query
          description: Show price rules created before date (format 2017-03-25T16:15:47-04:00).
          schema:
            type: string
            format: date-time
        - name: created_at_min
          in: query
          description: Show price rules created after date (format 2017-03-25T16:15:47-04:00).
          schema:
            type: string
            format: date-time
        - name: ends_at_max
          in: query
          description: Show price rules ending before date (format 2017-03-25T16:15:47-04:00).
          schema:
            type: string
            format: date-time
        - name: ends_at_min
          in: query
          description: Show price rules ending after date (format 2017-03-25T16:15:47-04:00).
          schema:
            type: string
            format: date-time
        - name: limit
          in: query
          description: The maximum number of results to retrieve.
          schema:
            type: integer
            format: int32
        - name: page_info
          in: query
          schema:
            type: string
        - name: since_id
          in: query
          description: Restrict results to after the specified ID.
          schema:
            type: integer
            format: int32
        - name: starts_at_max
          in: query
          description: Show price rules starting before date (format 2017-03-25T16:15:47-04:00).
          schema:
            type: string
            format: date-time
        - name: starts_at_min
          in: query
          description: Show price rules starting after date (format 2017-03-25T16:15:47-04:00).
          schema:
            type: string
            format: date-time
        - name: times_used
          in: query
          description: Show price rules with times used.
          schema:
            type: string
        - name: updated_at_max
          in: query
          description: Show price rules last updated before date (format 2017-03-25T16:15:47-04:00).
          schema:
            type: string
            format: date-time
        - name: updated_at_min
          in: query
          description: Show price rules last updated after date (format 2017-03-25T16:15:47-04:00).
          schema:
            type: string
            format: date-time
      responses:
        '200':
          description: Success
          headers:
            X-Shopify-Shop-Api-Call-Limit:
              description: How many requests you’ve made for a particular store
              schema:
                type: string
            Retry-After:
              description: Contains the number of seconds to wait until you can make a request again.
              schema:
                type: string
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PriceRuleList'
  '/price_rules/{price_rule_id}.json':
    put:
      tags:
        - PriceRule
      summary: Updates an existing a price rule
      operationId: UpdatePriceRule
      parameters:
        - name: price_rule_id
          in: path
          required: true
          schema:
            type: integer
            format: int64
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdatePriceRuleRequest'
          application/*+json:
            schema:
              $ref: '#/components/schemas/UpdatePriceRuleRequest'
        required: true
      responses:
        '200':
          description: Success
          headers:
            X-Shopify-Shop-Api-Call-Limit:
              description: How many requests you’ve made for a particular store
              schema:
                type: string
            Retry-After:
              description: Contains the number of seconds to wait until you can make a request again.
              schema:
                type: string
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PriceRuleItem'
    get:
      tags:
        - PriceRule
      summary: Retrieves a single price rule
      operationId: GetPriceRule
      parameters:
        - name: price_rule_id
          in: path
          required: true
          schema:
            type: integer
            format: int64
      responses:
        '200':
          description: Success
          headers:
            X-Shopify-Shop-Api-Call-Limit:
              description: How many requests you’ve made for a particular store
              schema:
                type: string
            Retry-After:
              description: Contains the number of seconds to wait until you can make a request again.
              schema:
                type: string
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PriceRuleItem'
    delete:
      tags:
        - PriceRule
      summary: Remove an existing PriceRule
      operationId: DeletePriceRule
      parameters:
        - name: price_rule_id
          in: path
          required: true
          schema:
            type: integer
            format: int64
      responses:
        '204':
          description: No Content
          headers:
            X-Shopify-Shop-Api-Call-Limit:
              description: How many requests you’ve made for a particular store
              schema:
                type: string
            Retry-After:
              description: Contains the number of seconds to wait until you can make a request again.
              schema:
                type: string
  /price_rules/count.json:
    get:
      tags:
        - PriceRule
      summary: Retrieves a count of all price rules
      operationId: CountPriceRules
      responses:
        '200':
          description: Success
          headers:
            X-Shopify-Shop-Api-Call-Limit:
              description: How many requests you’ve made for a particular store
              schema:
                type: string
            Retry-After:
              description: Contains the number of seconds to wait until you can make a request again.
              schema:
                type: string
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CountItem'
components:
  schemas:
    CountItem:
      type: object
      properties:
        count:
          type: integer
          format: int32
      additionalProperties: { }
    CreateDiscountCode:
      type: object
      properties:
        amount:
          type: string
          description: The amount of the discount.
          nullable: true
        code:
          type: string
          description: The discount code.
          nullable: true
        type:
          type: string
          description: 'The type of discount. Known values are ''percentage'', ''shipping'', ''fixed_amount'' and ''none''.'
          nullable: true
      additionalProperties: { }
    CreateDiscountCodeRequest:
      required:
        - discount_code
      type: object
      properties:
        discount_code:
          $ref: '#/components/schemas/CreateDiscountCode'
      additionalProperties: { }
    CreatePriceRule:
      type: object
      properties:
        title:
          type: string
          nullable: true
        target_type:
          type: string
          nullable: true
        target_selection:
          type: string
          nullable: true
        allocation_method:
          type: string
          nullable: true
        value_type:
          type: string
          nullable: true
        value:
          type: number
          format: decimal
        once_per_customer:
          type: boolean
          nullable: true
        usage_limit:
          type: integer
          format: int64
          nullable: true
        customer_selection:
          type: string
          nullable: true
        prerequisite_subtotal_range:
          $ref: '#/components/schemas/PrerequisiteValueRange'
        prerequisite_shipping_price_range:
          $ref: '#/components/schemas/PrerequisiteValueRange'
        prerequisite_saved_search_ids:
          type: array
          items:
            type: integer
            format: int64
          nullable: true
        prerequisite_customer_ids:
          type: array
          items:
            type: integer
            format: int64
        entitled_product_ids:
          type: array
          items:
            type: integer
            format: int64
        entitled_variant_ids:
          type: array
          items:
            type: integer
            format: int64
        entitled_collection_ids:
          type: array
          items:
            type: integer
            format: int64
        entitled_country_ids:
          type: array
          items:
            type: integer
            format: int64
        starts_at:
          type: string
          format: date-time
          nullable: true
        ends_at:
          type: string
          format: date-time
          nullable: true
        created_at:
          type: string
          format: date-time
          nullable: true
        updated_at:
          type: string
          format: date-time
          nullable: true
      additionalProperties: { }
    CreatePriceRuleRequest:
      required:
        - price_rule
      type: object
      properties:
        price_rule:
          $ref: '#/components/schemas/CreatePriceRule'
      additionalProperties: { }
    DiscountCode:
      required:
        - id
      type: object
      properties:
        amount:
          type: string
          description: The amount of the discount.
          nullable: true
        code:
          type: string
          description: The discount code.
          nullable: true
        type:
          type: string
          description: 'The type of discount. Known values are ''percentage'', ''shipping'', ''fixed_amount'' and ''none''.'
          nullable: true
        id:
          type: integer
          format: int64
        admin_graphql_api_id:
          type: string
          nullable: true
      additionalProperties: { }
    DiscountCodeCreation:
      required:
        - id
      type: object
      properties:
        id:
          type: integer
          format: int64
        admin_graphql_api_id:
          type: string
          nullable: true
      additionalProperties: { }
    DiscountCodeCreationItem:
      required:
        - discount_code_creation
      type: object
      properties:
        discount_code_creation:
          $ref: '#/components/schemas/DiscountCodeCreation'
      additionalProperties: { }
    DiscountCodeItem:
      required:
        - discount_code
      type: object
      properties:
        discount_code:
          $ref: '#/components/schemas/DiscountCode'
      additionalProperties: { }
    DiscountCodeList:
      required:
        - discount_codes
      type: object
      properties:
        discount_codes:
          type: array
          items:
            $ref: '#/components/schemas/DiscountCode'
      additionalProperties: { }
    PrerequisiteValueRange:
      type: object
      properties:
        less_than_or_equal_to:
          type: number
          format: decimal
          nullable: true
        greater_than_or_equal_to:
          type: number
          format: decimal
          nullable: true
      additionalProperties: { }
    PriceRule:
      required:
        - id
      type: object
      properties:
        title:
          type: string
          nullable: true
        target_type:
          type: string
          nullable: true
        target_selection:
          type: string
          nullable: true
        allocation_method:
          type: string
          nullable: true
        value_type:
          type: string
          nullable: true
        value:
          type: number
          format: decimal
        once_per_customer:
          type: boolean
          nullable: true
        usage_limit:
          type: integer
          format: int64
          nullable: true
        customer_selection:
          type: string
          nullable: true
        prerequisite_subtotal_range:
          $ref: '#/components/schemas/PrerequisiteValueRange'
        prerequisite_shipping_price_range:
          $ref: '#/components/schemas/PrerequisiteValueRange'
        prerequisite_saved_search_ids:
          type: array
          items:
            type: integer
            format: int64
          nullable: true
        prerequisite_customer_ids:
          type: array
          items:
            type: integer
            format: int64
        entitled_product_ids:
          type: array
          items:
            type: integer
            format: int64
        entitled_variant_ids:
          type: array
          items:
            type: integer
            format: int64
        entitled_collection_ids:
          type: array
          items:
            type: integer
            format: int64
        entitled_country_ids:
          type: array
          items:
            type: integer
            format: int64
        starts_at:
          type: string
          format: date-time
          nullable: true
        ends_at:
          type: string
          format: date-time
          nullable: true
        created_at:
          type: string
          format: date-time
          nullable: true
        updated_at:
          type: string
          format: date-time
          nullable: true
        id:
          type: integer
          format: int64
        admin_graphql_api_id:
          type: string
          nullable: true
      additionalProperties: { }
    PriceRuleItem:
      required:
        - price_rule
      type: object
      properties:
        price_rule:
          $ref: '#/components/schemas/PriceRule'
      additionalProperties: { }
    PriceRuleList:
      required:
        - price_rules
      type: object
      properties:
        price_rules:
          type: array
          items:
            $ref: '#/components/schemas/PriceRule'
      additionalProperties: { }
    UpdateDiscountCode:
      required:
        - id
      type: object
      properties:
        amount:
          type: string
          description: The amount of the discount.
          nullable: true
        code:
          type: string
          description: The discount code.
          nullable: true
        type:
          type: string
          description: 'The type of discount. Known values are ''percentage'', ''shipping'', ''fixed_amount'' and ''none''.'
          nullable: true
        id:
          type: integer
          format: int64
        admin_graphql_api_id:
          type: string
          nullable: true
      additionalProperties: { }
    UpdateDiscountCodeRequest:
      required:
        - discount_code
      type: object
      properties:
        discount_code:
          $ref: '#/components/schemas/UpdateDiscountCode'
      additionalProperties: { }
    UpdatePriceRule:
      required:
        - id
      type: object
      properties:
        title:
          type: string
          nullable: true
        target_type:
          type: string
          nullable: true
        target_selection:
          type: string
          nullable: true
        allocation_method:
          type: string
          nullable: true
        value_type:
          type: string
          nullable: true
        value:
          type: number
          format: decimal
        once_per_customer:
          type: boolean
          nullable: true
        usage_limit:
          type: integer
          format: int64
          nullable: true
        customer_selection:
          type: string
          nullable: true
        prerequisite_subtotal_range:
          $ref: '#/components/schemas/PrerequisiteValueRange'
        prerequisite_shipping_price_range:
          $ref: '#/components/schemas/PrerequisiteValueRange'
        prerequisite_saved_search_ids:
          type: array
          items:
            type: integer
            format: int64
          nullable: true
        prerequisite_customer_ids:
          type: array
          items:
            type: integer
            format: int64
        entitled_product_ids:
          type: array
          items:
            type: integer
            format: int64
        entitled_variant_ids:
          type: array
          items:
            type: integer
            format: int64
        entitled_collection_ids:
          type: array
          items:
            type: integer
            format: int64
        entitled_country_ids:
          type: array
          items:
            type: integer
            format: int64
        starts_at:
          type: string
          format: date-time
          nullable: true
        ends_at:
          type: string
          format: date-time
          nullable: true
        created_at:
          type: string
          format: date-time
          nullable: true
        updated_at:
          type: string
          format: date-time
          nullable: true
        id:
          type: integer
          format: int64
        admin_graphql_api_id:
          type: string
          nullable: true
      additionalProperties: { }
    UpdatePriceRuleRequest:
      required:
        - price_rule
      type: object
      properties:
        price_rule:
          $ref: '#/components/schemas/UpdatePriceRule'
      additionalProperties: { }
  securitySchemes:
    ApiKey:
      type: apiKey
      name: X-Shopify-Access-Token
      in: header
security:
  - ApiKey: [ ]